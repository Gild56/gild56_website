{% extends 'base.html' %}

{% block title %}
    {% if top == "levels" %}
        Levels list
    {% else %}
        Challenges list
    {% endif %}
{% endblock %}

{% block content %}
<header>
    <nav>
        <a href="{{ url_for('index') }}">Home</a>
        <a href="{{ url_for('contact') }}">Contact</a>
        <a href="{{ url_for('hall_of_fame') }}">Hall of Fame</a>
        <a href="{{ url_for('games') }}">Games</a>
        <a href="{{ url_for('community') }}">Community</a>
        <a href="{{ url_for('levels_list') }}" class="current">Lists</a>
        {% if logged_in %}
            <a href="{{ url_for('user_profile', profile=username) }}">{{ username }}</a>
        {% else %}
            <a href="{{ url_for('log_in') }}">Log In</a>
        {% endif %}
    </nav>
</header>

<main class="big-margin-left-right">
    <p class="bigger-line-height">
        <a href="{{ url_for('server_leaderboard_by_hardest') }}">Sort by hardest</a> |
        <a href="{{ url_for('server_leaderboard_by_list_points') }}">Sort by points</a> |
        <a href="{{ url_for('server_leaderboard_by_5_hardests') }}">Sort by 5 hardests</a> |
        <a href="{{ url_for('levels_list') }}">Levels list</a>
    </p>
    <h1>Top levels beaten on the Gild56's Community's server:</h1>

    {% for level in top_completed_levels %}
        {% if top == "levels" %}
            <div class="level-container" onclick="window.location.href='{{ url_for('level_page', level=level[0]) }}'">
        {% else %}
            <div class="level-container" onclick="window.location.href='{{ url_for('challenge_page', challenge=level[0]) }}'">
        {% endif %}
            <div class="row">
                <div>
                    <a href="https://www.youtube.com/watch?v={{ level }}" target="_blank" class="no-margin no-bg" onclick="event.stopPropagation()">
                    <img src="{{ generate_link(level[0]) }}" height="100" alt="{{ level[0] }}'s preview" class="preview" onclick="event.stopPropagation()">
                    </a>
                </div>
                <h1 class="copyable-heading left-margin" data-copy-text="{{ level[1] }}" onclick="event.stopPropagation()">#{{ level[1] }} - {{ level[0] }}
                {% if level[2] == 1 %}
                    <span class="points">({{ level[2] }} completion)</span></h1>
                {% else %}
                    <span class="points">({{ level[2] }} completions)</span></h1>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    <div id="copyNotification" class="notification">
        ID copied to clipboard!
    </div>
</main>
{% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='js/copyLink.js') }}"></script>
<script src="{{ url_for('static', filename='js/copyLevelID.js') }}"></script>
<script src="{{ url_for('static', filename='js/lockRefreshButton.js') }}"></script>
{% endblock %}
